!function(a,b){"function"==typeof define&&define.amd?define([],b):a.stage=a["frameworkless-stage"]=b()}(this,function(){function a(a,b){var c=a.style;a.stage||(j.appendChild(a),b.duration&&(c.transitionDuration=c.webkitTransitionDuration=c.mozTransitionDuration=b.duration+"ms"),b.timingFunction&&(c.transitionTimingFunction=c.webkitTransitionTimingFunction=c.mozTransitionTimingFunction=b.timingFunction),a.stage=i,a.stageOptions=b)}function b(a,b,c,d){var e=b+"-out",i=Math.round(a.stageOptions.duration)||500;f(a,e),c&&(f(a,"staged"),setTimeout(function(){g(a,e)},15)),setTimeout(function(){c||g(a,"staged"),h(d)},i+10)}function c(a){var c;if(l){if(c=l.stageOptions,c&&c.animation)return b(l,c.animation,!1,a);g(l.base,"staged")}h(a)}function d(a,d){function e(){l=a,k=!1,h(d)}var g=a.stageOptions;k=!0,c(function(){return g&&g.animation?b(a,g.animation,!0,e):(f(a,"staged"),void e())})}function e(a,b){function c(){d(a,function(){n.length&&n.pop()(),h(b)})}return k||n.length?n.push(c):void c()}function f(a,b){a.classList.add(b)}function g(a,b){a.classList.remove(b)}function h(a){return"function"==typeof a?a():void 0}var i,j,k,l,m,n=[];return i={init:function(a){var b=a.container||a;return j="string"==typeof b?document.querySelector(b):b,j&&j.nodeName?(f(j,"stage"),void(m=!0)):!1},show:function(b,c,d){var f=b.base||b;return f=f[0]||f,m&&b&&f?(c=c||b.stageOptions||{animation:!1},f.stage||a(f,c),e(f,d),!0):!1},hide:function(a,b){var d;return b||(b=a,a=null),d=b&&b.base&&l===b.base,d&&c(a||!1),d}}});