!function(a){"function"==typeof define&&define.amd?define(["view","util","events","zepto"],a):a(View,window.util,window.EventEmitter,$,window.View)}(function(a,b,c,d){function e(a){"string"==typeof a&&(k=d(a),k.addClass("stage"))}function f(a,b){return a.stage?!1:(console.log("Adding view!",a,b),k.append(a.base),a.stage=j,a.stageOptions=b,!0)}function g(a,b,c,d){"fade"===b?c?(console.log("This should be fading in!"),a.base.hasClass("fade-out")||a.base.addClass("fade-out"),a.base.addClass("staged"),setTimeout(function(){a.base.removeClass("fade-out"),d&&d()},15)):(a.base.addClass("fade-out"),setTimeout(function(){a.base.removeClass("staged"),d&&d()},500)):"slide"===b&&c&&(a.base.hasClass("slide-out")||a.base.addClass("slide-out"),a.base.addClass("staged"),setTimeout(function(){a.base.removeClass("slide-out")},15))}function h(a){l?(console.log("Hide the view!",l.stageOptions),l.stageOptions&&l.stageOptions.animation?g(l,l.stageOptions.animation,!1,a):(l.base.removeClass("staged"),a&&a())):a&&a()}function i(a){var b=Date.now();h(function(){console.log("Took "+(Date.now()-b)+" to hide."),console.log("Show the view!",a.stageOptions),a.stageOptions&&a.stageOptions.animation?(console.log("View has an animation!!"),g(a,a.stageOptions.animation,!0,function(){console.log("ANIMATION OVER"),l=a})):(a.base.addClass("staged"),l=a)})}var j=new c,k=null,l=null,m=!1;return b.extend(j,{init:function(a){return a.container?(e(a.container),void(m=!0)):!1},show:function(b,c){return m?(b instanceof a&&(c=b,b=null),b=b||c.stageOptions||{animation:!1},c&&c.base?(c.stage||f(c,b),void i(c)):!1):!1},hide:function(a,b){return m?(a instanceof b&&(b=a,a=null),a=a||!1,b&&b.base?l!==b.base?!1:void h(a):!1):!1},spinner:function(a){}}),j});